{
    "name": "aws-crt-dotnet",
    "build_steps": [
        "dotnet build -v normal -p:PlatformTarget={platform_target}"
    ],
    "test_steps": [
        "dotnet test tests -v normal -p:PlatformTarget={platform_target} -f netcoreapp2.0"
    ],
    "imports": [
        "dotnetcore21"
    ],
    "variables": {
        "platform_target": "x64"
    },
    "hosts": {
        "al2": {
            "packages": [
                "libicu",
                "zlib",
                "libcurl"
            ]
        }
    },
    "targets": {
        "linux": {
            "imports": [
                "s2n"
            ],
            "architectures": {
                "x64": {
                    "build_env": {
                        "AWS_DOTNET_RUNTIME" : "linux-x64"
                    },
                    "!cmake_args": [
                        "-DLibCrypto_INCLUDE_DIR=${libcrypto_path}/include",
                        "-DLibCrypto_SHARED_LIBRARY=${libcrypto_path}/lib/libcrypto.so",
                        "-DLibCrypto_STATIC_LIBRARY=${libcrypto_path}/lib/libcrypto.a"
                    ]
                }
            }
        },
        "windows": {
            "architectures": {
                "x86": {
                    "variables": {
                        "platform_target": "x86"
                    }
                },
                "x64": {
                    "variables": {
                        "platform_target": "x64"
                    }
                }
            }
        }
    }
}