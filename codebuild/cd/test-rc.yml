version: 0.2
#this buildspec assumes the ubuntu 14.04 trusty image
# This job is responsible for artifacting the JAR which will have all of the other shared libs stuffed
# into it once all platforms are built and artifacted
phases:

  pre_build:
    commands:
      - cd aws-crt-dotnet
      - export CRT_VERSION=$(git describe --abbrev=0 | sed -e s/^v//)

  build:
    commands:
      # Verify that the package can be found on nuget.org
      - cd /tmp
      - curl -sL "https://api.nuget.org/v3-flatcontainer/awscrt/awscrt.${CRT_VERSION}-rc.nupkg" -o /dev/null
      - curl -sL "https://api.nuget.org/v3-flatcontainer/awscrt-http/awscrt-http.${CRT_VERSION}-rc.nupkg" -o /dev/null
